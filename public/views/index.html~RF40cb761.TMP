<section data-ng-controller="IndexController" data-ng-init="find()">

    <div class=" nav-lateral nav-lateral-grande">
        <h3>Categorias</h3>
        <ul class="list-unstyled">
            <li ng-repeat="cats in categoriasUsuario | filter:filtroCategoria" id="{{cats._id}}" ng-class="cats.actual">
                <div style="padding-left: {{(cats.nivel-1)*10}}px;font-size: {{16 - cats.nivel}}px" ng-click="mostrarProcs(cats._id,cats.name,$index, cats.orden)">{{cats.name}} ({{cats.cantProcs}})</div>
            </li>
        </ul>
    </div>
    <div class="contenedor-procs">
    <div class="row" ng-hide="busqueda||noVistos">
        <h2>Vistos Recientemente</h2>
        <ul class="cbp-rfgrid">
            <li data-ng-repeat="procedimiento in procedimientosUltimosVistos | filter: {nombre: filtoRapido}" ng-click="irProcedimiento(procedimiento._id);" class= "no-busqueda animacion-ngrepeat">
            <div class="clavo">
            <div class="cbp-rfgrid-tit">
                <div>
                    <h3>{{procedimiento.nombre}}</h3>
                </div>
                <div class="input-sm text-center elemento-lb">
                    <span>
                        <rating value="procedimiento.rate" readonly="true" on-hover="hoveringOver(value)" on-leave="overStar = null">
                        </rating>({{procedimiento.totalVotos}})
                    </span>
                </div>
                <div class="input-sm text-center elemento-rb"> <span class=" glyphicon glyphicon-eye-open"></span>({{procedimiento.visitas}})
                </div>
            </div>
             <div class="cbp-rfgrid-des">
             <h4>{{procedimiento.nombre}}</h4>
             <span>{{procedimiento.descripcion | truncate:100}}</span>
             </div>
             </div>
            </li>
        </ul>
    </div>
    <div class="row" ng-hide="busqueda">
        <h2>Mas Vistos</h2>
        <ul class="cbp-rfgrid">
            <li data-ng-repeat="procedimiento in procedimientosVisitas" ng-click="irProcedimiento(procedimiento._id);" class= "no-busqueda animacion-ngrepeat">
            <div class="clavo">
            <div class="cbp-rfgrid-tit">
                <div>
                    <h3>{{procedimiento.nombre}}</h3>
                </div>
                <div class="input-sm text-center elemento-lb">
                    <span>
                        <rating value="procedimiento.rate" readonly="true" on-hover="hoveringOver(value)" on-leave="overStar = null">
                        </rating>({{procedimiento.totalVotos}})
                    </span>
                </div>
                <div class="input-sm text-center elemento-rb"> <span class=" glyphicon glyphicon-eye-open"></span>({{procedimiento.visitas}})
                </div>
            </div>
             <div class="cbp-rfgrid-des">
             <h4>{{procedimiento.nombre}}</h4>
             <span>{{procedimiento.descripcion | truncate:100}}</span>
             </div>
             </div>
            </li>
        </ul>
    </div>
    <div class="row" ng-hide="busqueda">
        <h2>Nuevos</h2>
        <ul class="cbp-rfgrid">
            <li data-ng-repeat="procedimiento in procedimientosUltimosCreados" ng-click="irProcedimiento(procedimiento._id);" class= "no-busqueda animacion-ngrepeat">
            <div class="clavo">
            <div class="cbp-rfgrid-tit">
                <div>
                    <h3>{{procedimiento.nombre}}</h3>
                </div>
                <div class="input-sm text-center elemento-lb">
                    <span>
                        <rating value="procedimiento.rate" readonly="true" on-hover="hoveringOver(value)" on-leave="overStar = null">
                        </rating>({{procedimiento.totalVotos}})
                    </span>
                </div>
                <div class="input-sm text-center elemento-rb"> <span class=" glyphicon glyphicon-eye-open"></span>({{procedimiento.visitas}})
                </div>
            </div>
             <div class="cbp-rfgrid-des">
             <h4>{{procedimiento.nombre}}</h4>
             <span>{{procedimiento.descripcion | truncate:100}}</span>
             </div>
             </div>
            </li>
        </ul>
    </div>
    <div class="row" ng-show="busqueda" style="margin-top:10px">
        <h2 class="titulo-inline">{{nombreCategoria}}</h2>
        <div class="col-md-6 col-sm-5 col-xs-7">
            <div class="input-group">
                    <input class="form-control" type="text" placeholder="Filtro rapido por Nombre" ng-model= "filtro.nombre" ng-change="AgregarParametroUrl('filtro', filtro.nombre)">
                <div class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
                </div>
            </div>
        </div>
        </div>
        <ul class="cbp-rfgrid">
            <li data-ng-repeat="procedimiento in procedimientosCategoria | filter:filtro" ng-click="irProcedimiento(procedimiento._id);" class="animacion-ngrepeat">
            <div class="clavo">
            <div class="cbp-rfgrid-tit">
                <div>
                    <h3>{{procedimiento.nombre}}</h3>
                </div>
                <div class="input-sm text-center elemento-lb">
                    <span>
                        <rating value="procedimiento.rate" readonly="true" on-hover="hoveringOver(value)" on-leave="overStar = null">
                        </rating>({{procedimiento.totalVotos}})
                    </span>
                </div>
                <div class="input-sm text-center elemento-rb"> <span class=" glyphicon glyphicon-eye-open"></span>({{procedimiento.visitas}})
                </div>
            </div>
             <div class="cbp-rfgrid-des">
             <h4>{{procedimiento.nombre}}</h4>
             <span>{{procedimiento.descripcion | truncate:100}}</span>
             </div>
             </div>
            </li>
        </ul>
    </div>
    </div>
</section>
